#!/bin/sh

if ! git rev-parse --is-inside-work-tree >/dev/null 2>&1; then
  echo "Not in a git repo" >&2
  exit 1
fi

git --no-pager diff --staged | gpt "Craft a concise and informative Git commit \
  message for the following code changes. The message should include a brief, \
  one-line summary (under 50 characters) and a short, bulleted explanation of \
  the key changes. Focus on the 'what' and 'why' of the changes, not the \
  'how'. The tone should be professional and technical. \
  Do not include any file names."
